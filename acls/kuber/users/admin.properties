


cat <<-EOF > /opt/confluentinc/admin.properties
bootstrap.servers=kafka.confluent.svc.cluster.local:9071
security.protocol=SSL
ssl.keystore.location=/mnt/sslcerts/keystore.jks
ssl.keystore.password=mystorepassword
ssl.truststore.location=/mnt/sslcerts/truststore.jks
ssl.truststore.password=mystorepassword
ssl.key.password=mystorepassword
EOF










kafka-0.kafka.confluent.svc.cluster.local:9071

cat <<-EOF > /opt/confluentinc/admin.properties
bootstrap.servers=kafka.confluent.svc.cluster.local:9071
security.protocol=SSL
ssl.keystore.location=/mnt/sslcerts/keystore.jks
ssl.keystore.password=mystorepassword
ssl.truststore.location=/mnt/sslcerts/truststore.jks
ssl.truststore.password=mystorepassword
EOF



cat <<-EOF > /opt/confluentinc/admin.properties
bootstrap.servers=kafka.confluent.svc.cluster.local:9071
security.protocol=SSL
ssl.keystore.location=/mnt/sslcerts/keystore.p12
ssl.keystore.password=mystorepassword
ssl.truststore.location=/mnt/sslcerts/truststore.p12
ssl.truststore.password=mystorepassword
EOF


/bin/kafka-acls --bootstrap-server kafka.confluent.svc.cluster.local:9071 \
 --command-config /opt/confluentinc/admin.properties \
 --add \
 --allow-principal "User:c3" \
 --operation Read --operation Write --operation Create \
 --topic _confluent-command



ps aux | grep kafka






openssl genrsa -out ./certificates/rootCAkey.pem 2048


openssl req -x509  -new -nodes \
  -key ./certificates/rootCAkey.pem \
  -days 3650 \
  -out ./certificates/cacerts.pem \
  -subj "/CN=TestCA"


openssl x509 -in ./certificates/cacerts.pem -text -noout


cfssl gencert -ca=./certificates/cacerts.pem \
-ca-key=./certificates/rootCAkey.pem \
-config=./certificates/ca-config.json \
-profile=server ./certificates/server-domain.json | cfssljson -bare ./certificates/server




openssl genrsa -out ./certificates/rootCAkey.pem 2048

openssl req -x509  -new -nodes \
  -key ./certificates/rootCAkey.pem \
  -days 3650 \
  -out ./certificates/cacerts.pem \
  -subj "/CN=TestCA"
  
  
  openssl x509 -in ./certificates/cacerts.pem -text -noout
